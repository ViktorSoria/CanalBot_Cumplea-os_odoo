<?xml version="1.0"?>
<odoo>
    <record id="view_form_account_payment_inherit" model="ir.ui.view">
        <field name="name">view.form.account.payment.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group3']" position="after">
                <group name="group4">
                    <field name="seller_original"/>
                    <field name="date_change" invisible="True"/>
                    <field name="date_payment_customer" attrs="{'readonly':[('edi_state','=','sent')]}"/>
<!--                    <field name="edi_state"/>-->
                    <field name="date_payment_SAT" attrs="{'readonly':[('edi_state','=','sent')]}"/>
                </group>
            </xpath>
        </field>
    </record>
    <record id="view_form_account_payment_tree_inherit" model="ir.ui.view">
        <field name="name">view.form.account.payment.tree.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="seller_original"/>
            </xpath>
        </field>
    </record>
    <template id="report_payment_document_ln10_inherit" inherit_id="l10n_mx_edi.report_payment_document_mx">
        <xpath expr="//div[@class='page']/h3" position="before">
            <t t-if="o.company_id">
                <span t-field="o.company_id.l10n_mx_edi_colony_code"/>
                <br/>
                Regimen Fiscal:<span t-field="o.company_id.l10n_mx_edi_fiscal_regime"/>
            </t>
<!--            <span>OLIWIS</span>-->
        </xpath>
        <xpath expr="//span[@t-field='o.partner_id']" position="after">
            <t t-if="o.partner_id.vat">
                <br/>
                <strong>RFC: </strong>
                <span t-field="o.partner_id.vat"/>
            </t>
        </xpath>
        <xpath expr="//span[@t-field='o.ref']" position="after">
            <t t-if="is_cfdi_signed">
                <br/>
                <strong>Folio Fiscal:</strong>
                <br/>
                <span t-esc="cfdi_vals.get('uuid')"/>
                <br/>
                <strong>Sello del Certificado Digital del SAT</strong>
                <br/>
                <span t-esc="cfdi_vals.get('certificate_sat_number')"/>
            </t>
        </xpath>
        <xpath expr="//t[@t-if='o.move_id.l10n_mx_edi_cfdi_uuid'][2]/table/thead/tr/th[1]" position="after">
        <th class="text-right"><span>Serie</span></th>
        <th class="text-right"><span>Folio</span></th>
        </xpath>
        <xpath expr="//t[@t-if='o.move_id.l10n_mx_edi_cfdi_uuid'][2]/table/tbody/tr/td[1]" position="after">
            <t t-set="ser_fol" t-value="o.edi_document_ids[0].edi_format_id._l10n_mx_edi_get_serie_and_folio(inv)"/>
            <td class="text-right"><span t-esc="ser_fol['serie_number']"/></td>
            <td class="text-right"><span t-esc="ser_fol['folio_number']"/></td>
        </xpath>

    </template>
</odoo>